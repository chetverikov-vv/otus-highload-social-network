# Домашнее задание
## Синхронная и асинхронная репликации

### Цель:  
В результате выполнения ДЗ вы настроите синхронную репликацию, протестируете ее влияние на производительность системы и убедитесь, что теперь вы не теряете транзакции в случае аварии.

### В данном задании тренируются навыки:

- обеспечение отказоустойчивости проекта;
- администрирование PostgreSQL;
- настройка репликации;
- проведение нагрузочных тестов.

Материал по работе с репликацией:
https://github.com/OtusTeam/highload/blob/master/lessons/02/05/live/guide.md

### Описание/Пошаговая инструкция выполнения домашнего задания:
#### Настраиваем асинхронную репликацию (сделаю мастер с 2 слейвами) 
- Выбираем 2 запроса на чтение (/user/get/{id} и /user/search из спецификации) и переносим их на чтение со слейва.
- Делаем нагрузочный тест по методам (/user/get/{id} и /user/search из спецификации), которые перевели на слейв до и после репликации. Замеряем нагрузку мастера (CPU, la, disc usage, memory usage).

#### Включить и настроить синхронную репликацию. Настроить 2 слейва и 1 мастер.
- Создать нагрузку на запись в любую тестовую таблицу. На стороне, которой нагружаем считать, сколько строк мы успешно записали.
- С помощью kill -9 убиваем мастер PosgtreSQL.
- Заканчиваем нагрузку на запись.
- Выбираем самый свежий слейв. Промоутим его до мастера. Переключаем на него второй слейв.
- Проверяем, есть ли потери транзакций.


Результатом сдачи ДЗ будет в виде исходного кода на github и отчета в текстовом виде, где вы отразите как вы выполняли каждый из пунктов.

### Критерии оценки:
Оценка происходит по принципу зачет/незачет.

Требования:
- В отчете корректно описано, как настроена репликация.
- 2 запроса переведено на чтение со слейва.
- Нагрузочное тестирование показало, что нагрузка перешла на слейв.
- В отчете описано как включить синхнронную и асинхронную репликацию
- Проведен эксперимент по потере и непотере транзакций при аварийной остановке master.